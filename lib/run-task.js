// Generated by CoffeeScript 2.0.2
module.exports = function(punk, reporter) {
  return {
    _runTask: async function(taskName, task) {
      var devnull, files, pipe, ref;
      reporter.startingTask(taskName);
      // set settings to standard format
      task = punk.d.toSetting(task);
      // load files
      files = (await punk.p.add(task.entry)({}, task));
      ref = task.pipes;
      // pass files through pipes
      for (devnull in ref) {
        pipe = ref[devnull];
        files = (await pipe(files, task));
        files = punk.d.bufferizeFiles(files);
      }
      // convert files
      if (task.to) {
        files = (await punk.p.to(task.to)(files, task));
      }
      // write files to FS
      files = (await punk.p.write(task)(files, task));
      // report
      reporter.finishedTask(taskName);
    }
  };
};
