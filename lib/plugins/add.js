// Generated by CoffeeScript 2.0.2
var fs, globby, path, pn;

path = require('path');

fs = require('fs');

globby = require('globby');

pn = require('pn/fs');

module.exports = function(punk, reporter) {
  var plugin;
  plugin = {};
  plugin.pipes = {
    add: function(settings) {
      if (!Array.isArray(settings)) {
        settings = [settings];
      }
      // PIPE #
      return async function(files, cond) {
        var contents, i, len, paths, pth;
        // get paths
        paths = globby.sync(settings, {
          cwd: cond.workdir
        });
        // no files at input
        if (paths.length === 0) {
          reporter.noFiles(settings);
        }
        // load files
        for (i = 0, len = paths.length; i < len; i++) {
          pth = paths[i];
          contents = (await pn.readFile(pth));
          files[pth] = contents;
        }
        return files;
      };
    }
  };
  plugin.pipes.load = plugin.pipes.add;
  return plugin;
};
