// Generated by CoffeeScript 2.0.2
module.exports = function(punk, reporter) {
  var plugin;
  plugin = {};
  plugin.pipes = {
    minify: function() {
      return async function(files, cond) {
        var r;
        r = (await punk.d.mapAsync(files, async function(file) {
          var collection, ext, pipe;
          ext = punk.d.getType(file);
          // if there's needed converter
          if (punk.minifiers[ext]) {
            // find converter
            pipe = punk.minifiers[ext];
            collection = new punk.Collection([file], cond);
            await collection.pipe(pipe);
            // pipe file
            return collection.files[0];
          } else {
            // remove file
            reporter.noMin(file.path, ext);
          }
        }));
        return r;
      };
    }
  };
  return plugin;
};
